# Generated by Django 5.1 on 2024-09-25 15:53

import django.db.models.deletion
import timescale.db.models.fields
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='MarketSymbol',
            fields=[
                ('symbol', models.CharField(max_length=20, primary_key=True, serialize=False, unique=True)),
                ('name', models.CharField(max_length=200)),
                ('market', models.CharField(max_length=50)),
                ('asset_type', models.CharField(max_length=50)),
                ('ipo_date', models.DateField(blank=True, null=True)),
                ('delisting_date', models.DateField(blank=True, null=True)),
                ('status', models.CharField(max_length=20)),
                ('has_company_info', models.BooleanField(default=False)),
                ('is_delisted', models.BooleanField(default=False)),
                ('min_period_yfinance', models.CharField(blank=True, max_length=20)),
                ('daily_period_yfinance', models.CharField(blank=True, max_length=20)),
            ],
            options={
                'db_table': 'market_symbol',
            },
        ),
        migrations.CreateModel(
            name='UtilitiesFilter',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255)),
                ('order', models.IntegerField(blank=True, null=True)),
                ('key', models.CharField(max_length=255)),
                ('value', models.CharField(max_length=255)),
            ],
            options={
                'db_table': 'utilities_filter',
            },
        ),
        migrations.CreateModel(
            name='MarketStock',
            fields=[
                ('symbol', models.OneToOneField(db_column='symbol', on_delete=django.db.models.deletion.DO_NOTHING, primary_key=True, related_name='stock', serialize=False, to='common.marketsymbol')),
                ('underlying_symbol', models.CharField(blank=True, max_length=10, null=True)),
                ('short_name', models.CharField(blank=True, max_length=100, null=True)),
                ('long_name', models.CharField(blank=True, max_length=200, null=True)),
                ('address1', models.CharField(blank=True, max_length=255, null=True)),
                ('city', models.CharField(blank=True, max_length=100, null=True)),
                ('state', models.CharField(blank=True, max_length=50, null=True)),
                ('zip', models.CharField(blank=True, max_length=20, null=True)),
                ('country', models.CharField(blank=True, max_length=100, null=True)),
                ('phone', models.CharField(blank=True, max_length=20, null=True)),
                ('website', models.URLField()),
                ('industry', models.CharField(blank=True, max_length=100, null=True)),
                ('sector', models.CharField(blank=True, max_length=100, null=True)),
                ('long_business_summary', models.TextField(blank=True, null=True)),
                ('full_time_employees', models.PositiveIntegerField(blank=True, null=True)),
                ('currency', models.CharField(blank=True, max_length=10, null=True)),
                ('financial_currency', models.CharField(blank=True, max_length=10, null=True)),
                ('exchange', models.CharField(blank=True, max_length=10, null=True)),
                ('quote_type', models.CharField(blank=True, max_length=10, null=True)),
                ('time_zone_full_name', models.CharField(blank=True, max_length=50, null=True)),
                ('time_zone_short_name', models.CharField(blank=True, max_length=10, null=True)),
                ('gmt_offset_milliseconds', models.BigIntegerField(blank=True, null=True)),
                ('uuid', models.UUIDField(blank=True, null=True)),
            ],
            options={
                'db_table': 'market_stock',
            },
        ),
        migrations.CreateModel(
            name='MarketStockDividend',
            fields=[
                ('symbol', models.OneToOneField(db_column='symbol', on_delete=django.db.models.deletion.DO_NOTHING, primary_key=True, related_name='stock_dividend', serialize=False, to='common.marketsymbol')),
                ('dividend_rate', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('dividend_yield', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('ex_dividend_date', models.DateTimeField(blank=True, null=True)),
                ('payout_ratio', models.DecimalField(blank=True, decimal_places=9, max_digits=20, null=True)),
                ('five_year_avg_dividend_yield', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('trailing_annual_dividend_rate', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('trailing_annual_dividend_yield', models.DecimalField(blank=True, decimal_places=9, max_digits=20, null=True)),
            ],
            options={
                'db_table': 'market_stock_dividend',
            },
        ),
        migrations.CreateModel(
            name='MarketStockFinancial',
            fields=[
                ('symbol', models.OneToOneField(db_column='symbol', on_delete=django.db.models.deletion.DO_NOTHING, primary_key=True, related_name='stock_financial', serialize=False, to='common.marketsymbol')),
                ('total_cash', models.BigIntegerField(blank=True, null=True)),
                ('total_cash_per_share', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('ebitda', models.BigIntegerField(blank=True, null=True)),
                ('total_debt', models.BigIntegerField(blank=True, null=True)),
                ('quick_ratio', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('current_ratio', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('total_revenue', models.BigIntegerField(blank=True, null=True)),
                ('debt_to_equity', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('revenue_per_share', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('net_income_to_common', models.BigIntegerField(blank=True, null=True)),
                ('free_cashflow', models.BigIntegerField(blank=True, null=True)),
                ('operating_cashflow', models.BigIntegerField(blank=True, null=True)),
                ('last_fiscal_year_end', models.DateTimeField(blank=True, null=True)),
                ('next_fiscal_year_end', models.DateTimeField(blank=True, null=True)),
                ('most_recent_quarter', models.DateTimeField(blank=True, null=True)),
                ('last_split_factor', models.CharField(blank=True, max_length=10, null=True)),
                ('last_split_date', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'db_table': 'market_stock_financial',
            },
        ),
        migrations.CreateModel(
            name='MarketStockPerformance',
            fields=[
                ('symbol', models.OneToOneField(db_column='symbol', on_delete=django.db.models.deletion.DO_NOTHING, primary_key=True, related_name='stock_performance', serialize=False, to='common.marketsymbol')),
                ('fifty_two_week_low', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('fifty_two_week_high', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('fifty_day_average', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('two_hundred_day_average', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('earnings_quarterly_growth', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('earnings_growth', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('revenue_growth', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('gross_margins', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('ebitda_margins', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('operating_margins', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('return_on_assets', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('return_on_equity', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('profit_margins', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
            ],
            options={
                'db_table': 'market_stock_performance',
            },
        ),
        migrations.CreateModel(
            name='MarketStockPrice',
            fields=[
                ('symbol', models.OneToOneField(db_column='symbol', on_delete=django.db.models.deletion.DO_NOTHING, primary_key=True, related_name='stock_price', serialize=False, to='common.marketsymbol')),
                ('price_hint', models.PositiveIntegerField(blank=True, null=True)),
                ('previous_close', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('open_price', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('day_low', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('day_high', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('regular_market_previous_close', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('regular_market_open', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('regular_market_day_low', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('regular_market_day_high', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('current_price', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('bid', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('ask', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('bid_size', models.PositiveIntegerField(blank=True, null=True)),
                ('ask_size', models.PositiveIntegerField(blank=True, null=True)),
                ('volume', models.BigIntegerField(blank=True, null=True)),
                ('regular_market_volume', models.BigIntegerField(blank=True, null=True)),
                ('average_volume', models.BigIntegerField(blank=True, null=True)),
                ('average_volume_10days', models.BigIntegerField(blank=True, null=True)),
                ('average_daily_volume_10day', models.BigIntegerField(blank=True, null=True)),
            ],
            options={
                'db_table': 'market_stock_price',
            },
        ),
        migrations.CreateModel(
            name='MarketStockRiskMetrics',
            fields=[
                ('symbol', models.OneToOneField(db_column='symbol', on_delete=django.db.models.deletion.DO_NOTHING, primary_key=True, related_name='stock_risk_metrics', serialize=False, to='common.marketsymbol')),
                ('audit_risk', models.PositiveIntegerField(blank=True, null=True)),
                ('board_risk', models.PositiveIntegerField(blank=True, null=True)),
                ('compensation_risk', models.PositiveIntegerField(blank=True, null=True)),
                ('share_holder_rights_risk', models.PositiveIntegerField(blank=True, null=True)),
                ('overall_risk', models.PositiveIntegerField(blank=True, null=True)),
                ('governance_epoch_date', models.DateTimeField(blank=True, null=True)),
                ('compensation_as_of_epoch_date', models.DateTimeField(blank=True, null=True)),
                ('first_trade_date_epoch_utc', models.DateTimeField(blank=True, null=True)),
                ('max_age', models.BigIntegerField(blank=True, null=True)),
            ],
            options={
                'db_table': 'market_stock_risk_metrics',
            },
        ),
        migrations.CreateModel(
            name='MarketStockShare',
            fields=[
                ('symbol', models.OneToOneField(db_column='symbol', on_delete=django.db.models.deletion.DO_NOTHING, primary_key=True, related_name='stock_share', serialize=False, to='common.marketsymbol')),
                ('float_shares', models.BigIntegerField(blank=True, null=True)),
                ('shares_outstanding', models.BigIntegerField(blank=True, null=True)),
                ('shares_short', models.BigIntegerField(blank=True, null=True)),
                ('shares_short_prior_month', models.BigIntegerField(blank=True, null=True)),
                ('shares_short_previous_month_date', models.DateTimeField(blank=True, null=True)),
                ('date_short_interest', models.DateTimeField(blank=True, null=True)),
                ('shares_percent_shares_out', models.DecimalField(blank=True, decimal_places=9, max_digits=20, null=True)),
                ('held_percent_insiders', models.DecimalField(blank=True, decimal_places=9, max_digits=20, null=True)),
                ('held_percent_institutions', models.DecimalField(blank=True, decimal_places=9, max_digits=20, null=True)),
                ('short_ratio', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('short_percent_of_float', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
            ],
            options={
                'db_table': 'market_stock_share',
            },
        ),
        migrations.CreateModel(
            name='MarketStockTarget',
            fields=[
                ('symbol', models.OneToOneField(db_column='symbol', on_delete=django.db.models.deletion.DO_NOTHING, primary_key=True, related_name='stock_target', serialize=False, to='common.marketsymbol')),
                ('target_high_price', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('target_low_price', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('target_mean_price', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('target_median_price', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('recommendation_mean', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('recommendation_key', models.CharField(blank=True, max_length=10, null=True)),
                ('number_of_analyst_opinions', models.PositiveIntegerField(blank=True, null=True)),
            ],
            options={
                'db_table': 'market_stock_target',
            },
        ),
        migrations.CreateModel(
            name='MarketStockValuation',
            fields=[
                ('symbol', models.OneToOneField(db_column='symbol', on_delete=django.db.models.deletion.DO_NOTHING, primary_key=True, related_name='stock_valuation', serialize=False, to='common.marketsymbol')),
                ('market_cap', models.BigIntegerField(blank=True, null=True)),
                ('beta', models.DecimalField(blank=True, decimal_places=7, max_digits=20, null=True)),
                ('trailing_pe', models.DecimalField(blank=True, decimal_places=8, max_digits=20, null=True)),
                ('forward_pe', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('price_to_sales_trailing_12_months', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('price_to_book', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('book_value', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('peg_ratio', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('trailing_peg_ratio', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('enterprise_value', models.BigIntegerField(blank=True, null=True)),
                ('enterprise_to_revenue', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('enterprise_to_ebitda', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('trailing_eps', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
                ('forward_eps', models.DecimalField(blank=True, decimal_places=7, max_digits=15, null=True)),
            ],
            options={
                'db_table': 'market_stock_valuation',
            },
        ),
        migrations.CreateModel(
            name='MarketStockHistoricalBarsByDay',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('time', timescale.db.models.fields.TimescaleDateTimeField(interval='1 day')),
                ('symbol', models.CharField(default='NaN', max_length=10)),
                ('open', models.FloatField()),
                ('high', models.FloatField()),
                ('low', models.FloatField()),
                ('close', models.FloatField()),
                ('volume', models.FloatField()),
                ('dividend', models.FloatField()),
                ('stock_splits', models.FloatField()),
            ],
            options={
                'db_table': 'market_stock_hist_bars_day_ts',
                'indexes': [models.Index(fields=['symbol', 'time'], name='market_stoc_symbol_cfb217_idx')],
                'constraints': [models.UniqueConstraint(fields=('symbol', 'time'), name='symbol_timestamp_day_pk')],
            },
        ),
        migrations.CreateModel(
            name='MarketStockHistoricalBarsByMin',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('time', timescale.db.models.fields.TimescaleDateTimeField(interval='1 day')),
                ('symbol', models.CharField(default='NaN', max_length=10)),
                ('open', models.FloatField()),
                ('high', models.FloatField()),
                ('low', models.FloatField()),
                ('close', models.FloatField()),
                ('volume', models.FloatField()),
                ('dividend', models.FloatField()),
                ('stock_splits', models.FloatField()),
            ],
            options={
                'db_table': 'market_stock_hist_bars_min_ts',
                'indexes': [models.Index(fields=['symbol', 'time'], name='market_stoc_symbol_e1beec_idx')],
                'constraints': [models.UniqueConstraint(fields=('symbol', 'time'), name='symbol_timestamp_min_pk')],
            },
        ),
        migrations.CreateModel(
            name='Portfolio',
            fields=[
                ('portfolio_id', models.AutoField(primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'portfolio',
            },
        ),
        migrations.CreateModel(
            name='PortfolioItem',
            fields=[
                ('portfolio_item_id', models.AutoField(primary_key=True, serialize=False)),
                ('quantity', models.FloatField(null=True)),
                ('average_price', models.FloatField(null=True)),
                ('portfolio', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='common.portfolio')),
                ('symbol', models.ForeignKey(on_delete=django.db.models.deletion.DO_NOTHING, to='common.marketsymbol')),
            ],
            options={
                'db_table': 'portfolio_item',
                'unique_together': {('portfolio', 'symbol')},
            },
        ),
        migrations.CreateModel(
            name='PortfolioPerformance',
            fields=[
                ('portfolio_performance_id', models.AutoField(primary_key=True, serialize=False)),
                ('total_value', models.DecimalField(decimal_places=2, max_digits=15)),
                ('total_gain_loss', models.DecimalField(decimal_places=2, max_digits=15)),
                ('last_updated', models.DateTimeField(auto_now=True)),
                ('portfolio_item', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, to='common.portfolioitem')),
            ],
            options={
                'db_table': 'portfolio_performance',
            },
        ),
        migrations.CreateModel(
            name='PositionSizing',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('capital', models.DecimalField(decimal_places=2, default=10000, max_digits=15)),
                ('risk', models.DecimalField(decimal_places=2, default=0.5, max_digits=5)),
                ('rounding', models.IntegerField(default=2, null=True)),
                ('commission', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('tax', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'position_sizing',
            },
        ),
        migrations.CreateModel(
            name='ResearchStockVolume',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('volume', models.BigIntegerField(blank=True, null=True)),
                ('avg_volume_50', models.BigIntegerField(blank=True, null=True)),
                ('avg_volume_5', models.BigIntegerField(blank=True, null=True)),
                ('symbol', models.ForeignKey(db_column='symbol', on_delete=django.db.models.deletion.DO_NOTHING, related_name='research_stock_volume', to='common.marketsymbol')),
            ],
            options={
                'db_table': 'research_stock_volume',
            },
        ),
        migrations.CreateModel(
            name='Transaction',
            fields=[
                ('portfolio_transaction_id', models.AutoField(primary_key=True, serialize=False)),
                ('transaction_type', models.CharField(choices=[('buy', 'Buy'), ('sell', 'Sell'), ('sell Short', 'Buy'), ('buy', 'Buy')], max_length=10)),
                ('quantity', models.FloatField()),
                ('price', models.FloatField()),
                ('date', models.DateTimeField(null=True)),
                ('commission', models.FloatField(null=True)),
                ('notes', models.CharField(blank=True, max_length=255, null=True)),
                ('portfolio_item', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='common.portfolioitem')),
            ],
            options={
                'db_table': 'portfolio_transaction',
            },
        ),
        migrations.CreateModel(
            name='UtilitiesLookup',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('category', models.CharField(max_length=255)),
                ('type', models.CharField(max_length=255)),
                ('order', models.IntegerField(blank=True, null=True)),
                ('key', models.CharField(max_length=255)),
                ('value', models.CharField(max_length=255)),
            ],
            options={
                'db_table': 'utilities_lookup',
                'indexes': [models.Index(fields=['category', 'type', 'key'], name='utilities_l_categor_1f51fd_idx')],
                'constraints': [models.UniqueConstraint(fields=('category', 'type', 'key'), name='utilities_lookup_category_type_key_pk')],
            },
        ),
        migrations.CreateModel(
            name='MarketCompanyOfficer',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100)),
                ('max_age', models.PositiveIntegerField(blank=True, null=True)),
                ('age', models.PositiveIntegerField(blank=True, null=True)),
                ('title', models.CharField(blank=True, max_length=100, null=True)),
                ('year_born', models.PositiveIntegerField(blank=True, null=True)),
                ('fiscal_year', models.PositiveIntegerField(blank=True, null=True)),
                ('total_pay', models.BigIntegerField(blank=True, null=True)),
                ('exercised_value', models.BigIntegerField(blank=True, null=True)),
                ('unexercised_value', models.BigIntegerField(blank=True, null=True)),
                ('symbol', models.ForeignKey(db_column='symbol', on_delete=django.db.models.deletion.DO_NOTHING, related_name='stock_company_officer', to='common.marketsymbol')),
            ],
            options={
                'db_table': 'market_company_officer',
                'unique_together': {('symbol', 'name')},
            },
        ),
    ]
